// Lista de produtos
const produtos = [
  {
    nome: "iPhone 13 Pro Max",
    preco: "R$ 5.499",
    imagens: [
      "https://store.storeimages.cdn-apple.com/4982/as-images.apple.com/is/iphone13pro-digitalmat-gallery-1-202209?wid=2000&hei=2000&fmt=jpeg&qlt=90&.v=1662055818301",
      "https://store.storeimages.cdn-apple.com/4982/as-images.apple.com/is/iphone13pro-digitalmat-gallery-2-202209?wid=2000&hei=2000&fmt=jpeg&qlt=90&.v=1662055818883",
      "https://store.storeimages.cdn-apple.com/4982/as-images.apple.com/is/iphone13pro-digitalmat-gallery-3-202209?wid=2000&hei=2000&fmt=jpeg&qlt=90&.v=1662055819585"
    ],
    checkout: "#"
  },
  {
    nome: "Apple Watch Series 9",
    preco: "R$ 3.199",
    imagens: [
      "https://store.storeimages.cdn-apple.com/4982/as-images.apple.com/is/watch-s9-digitalmat-gallery-1-202309?wid=2000&hei=2000&fmt=jpeg&qlt=90&.v=1693704308027",
      "https://store.storeimages.cdn-apple.com/4982/as-images.apple.com/is/watch-s9-digitalmat-gallery-2-202309?wid=2000&hei=2000&fmt=jpeg&qlt=90&.v=1693704308249",
      "https://store.storeimages.cdn-apple.com/4982/as-images.apple.com/is/watch-s9-digitalmat-gallery-3-202309?wid=2000&hei=2000&fmt=jpeg&qlt=90&.v=1693704308452"
    ],
    checkout: "#"
  },
  {
    nome: "MacBook Air M2",
    preco: "R$ 9.499",
    imagens: [
      "https://store.storeimages.cdn-apple.com/4982/as-images.apple.com/is/mb-air-midnight-gallery1-202206?wid=2000&hei=2000&fmt=jpeg&qlt=90&.v=1652825518842",
      "https://store.storeimages.cdn-apple.com/4982/as-images.apple.com/is/mb-air-midnight-gallery2-202206?wid=2000&hei=2000&fmt=jpeg&qlt=90&.v=1652825518736",
      "https://store.storeimages.cdn-apple.com/4982/as-images.apple.com/is/mb-air-midnight-gallery3-202206?wid=2000&hei=2000&fmt=jpeg&qlt=90&.v=1652825518856"
    ],
    checkout: "#"
  }
];

// Renderizar produtos
const container = document.getElementById("produtos");

produtos.forEach((p) => {
  const card = document.createElement("div");
  card.className = "card";
  card.innerHTML = `
    <img src="${p.imagens[0]}" alt="${p.nome}" class="produto-img">
    <h3>${p.nome}</h3>
    <p>${p.preco}</p>
    <button onclick="window.location.href='${p.checkout}'">Comprar</button>
  `;
  container.appendChild(card);

  // Clique na imagem para abrir modal
  const imgEl = card.querySelector(".produto-img");
  imgEl.addEventListener("click", () => abrirModal(p.imagens));
});

// Modal
const modal = document.getElementById("modal");
const modalImg = document.getElementById("modal-img");
const fechar = document.getElementById("fechar");

function abrirModal(imgs) {
  let index = 0;
  modal.style.display = "block";
  modalImg.src = imgs[index];

  modalImg.onclick = () => {
    index = (index + 1) % imgs.length;
    modalImg.src = imgs[index];
  };
}

fechar.onclick = () => {
  modal.style.display = "none";
};
